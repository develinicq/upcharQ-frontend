import React, { useState, useEffect } from "react";
import { useParams, useNavigate } from "react-router-dom";
import { MoreHorizontal, CheckCircle, MoveUp } from "lucide-react";
import AvatarCircle from "../../../components/AvatarCircle";
import Badge from "../../../components/Badge";
import PatientVitals from "./PatientVitals";
import AddVitalsDrawer from "./AddVitalsDrawer";
import PatientAppointments from "./PatientAppointments";
import PatientMedicalHistory from "./PatientMedicalHistory";
import PatientDocuments from "./PatientDocuments";

import PatientDemographics from "./PatientDemographics";
import {
  getPatientOverviewForDoctor,
  getPatientVitalsForDoctor,
  getPatientAppointmentsForDoctor,
  getPatientMedicalHistoryForDoctor
} from "../../../services/doctorService";
import useDoctorAuthStore from "../../../store/useDoctorAuthStore";
import useClinicStore from "../../../store/settings/useClinicStore";
import ScheduleAppointmentDrawer2 from "../../../components/PatientList/ScheduleAppointmentDrawer2";
import UniversalLoader from "../../../components/UniversalLoader";

export default function PatientDetails() {
  const { id } = useParams();
  const navigate = useNavigate();
  // load patient details (overview & demographics) by id param
  const [patient, setPatient] = useState(
    history.state?.usr?.patient || history.state?.patient || {}
  );
  const [loading, setLoading] = useState(false);
  const [loadError, setLoadError] = useState(null);
  const [vitalsVersion, setVitalsVersion] = useState(0);

  const [appointments, setAppointments] = useState([]);
  const [medicalHistory, setMedicalHistory] = useState(null);
  const [vitalsHistory, setVitalsHistory] = useState([]);
  const [biometricsHistory, setBiometricsHistory] = useState([]);

  const refreshVitals = () => setVitalsVersion((v) => v + 1);

  useEffect(() => {
    let mounted = true;
    const loadAllData = async () => {
      if (!id) return;
      setLoading(true);
      setLoadError(null);
      try {
        const [overviewResp, vitalsResp, apptsResp, historyResp] = await Promise.all([
          getPatientOverviewForDoctor(id),
          getPatientVitalsForDoctor(id),
          getPatientAppointmentsForDoctor(id),
          getPatientMedicalHistoryForDoctor(id)
        ]);

        if (!mounted) return;

        // Process Overview
        const pdata = overviewResp && (overviewResp.patientId || overviewResp.overview) ? overviewResp : overviewResp?.data || {};
        const overview = pdata.overview || {};
        const contactInfo = overview.contactInfo || {};
        const phone = contactInfo.phone || {};
        const lastVisit = overview.lastVisit || {};

        setPatient((prev) => ({
          ...prev,
          patientId: pdata.patientId || prev.patientId,
          name: overview.name || prev.name || "-",
          contact: phone.primary || prev.contact || "-",
          secondaryContact: phone.secondary || "-",
          email: contactInfo.emailId || prev.email || "-",
          address: contactInfo.address || prev.address || null,
          gender: overview.gender ? (overview.gender.charAt(0).toUpperCase() + overview.gender.slice(1).toLowerCase()) : (prev.gender || "-"),
          dob: overview.dob ? new Date(overview.dob).toLocaleDateString("en-GB") : (prev.dob || "-"),
          age: overview.age !== undefined ? `${overview.age}y` : (prev.age || "-"),
          blood: overview.bloodGroup ? overview.bloodGroup.replace('_', ' ') : (prev.blood || "-"),
          lastVisit: lastVisit.date && (lastVisit.time || lastVisit.time === null)
            ? `${new Date(lastVisit.date).toLocaleDateString("en-GB")} | ${lastVisit.time ? new Date(lastVisit.time).toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit" }) : ""}` : "-",
          lastVisitDoctor: lastVisit.doctor?.name || lastVisit.doctorName || "-",
          lastVisitReason: lastVisit.reason || "-",
          demographics: overview.demographics || {},
          lastRecordedVitals: overview.lastRecordedVitalsAndBiometrics || null,
          dependants: overview.dependents || pdata.dependents || [],
          raw: pdata,
        }));

        // Process Vitals
        const vdata = vitalsResp?.data?.vitals || vitalsResp?.vitals || [];
        const bdata = vitalsResp?.data?.biometrics || vitalsResp?.biometrics || [];
        setVitalsHistory(vdata);
        setBiometricsHistory(bdata);

        // Process Appointments
        if (apptsResp?.success && Array.isArray(apptsResp.data)) {
          setAppointments(apptsResp.data);
        }

        // Process Medical History
        if (historyResp?.success) {
          setMedicalHistory(historyResp.data);
        }

      } catch (e) {
        console.error("Error loading patient details:", e);
        setLoadError(e?.message || "Failed to load patient details");
      } finally {
        if (mounted) setLoading(false);
      }
    };

    loadAllData();
    return () => {
      mounted = false;
    };
  }, [id, vitalsVersion]);

  const name = patient.name || "-";
  const mrn = patient.patientId || "-";
  const gender = patient.gender || "-";
  const dob = patient.dob || "-";
  const blood = patient.blood || "-";

  // leftTab controls the left fixed panel (overview, demographics)
  // rightTab controls the right flexible panel (vitals, appointment, medical, documents)
  const [leftTab, setLeftTab] = useState("overview");
  const [rightTab, setRightTab] = useState("vitals");
  const [vitalsDrawerOpen, setVitalsDrawerOpen] = useState(false);
  const [isScheduleOpen, setIsScheduleOpen] = useState(false);

  const { user: authDoc, loading: docLoading, fetchMe } = useDoctorAuthStore();

  useEffect(() => {
    if (!authDoc && !docLoading) {
      fetchMe?.();
    }
  }, [authDoc, docLoading, fetchMe]);
  const { clinic: clinicData } = useClinicStore();

  const handleOpenSchedule = () => setIsScheduleOpen(true);

  const handleOpenAddVitals = () => setVitalsDrawerOpen(true);
  const handleCloseAddVitals = () => setVitalsDrawerOpen(false);
  const handleSaveVitals = () => {
    refreshVitals();
    setVitalsDrawerOpen(false);
  };
  const [stickyNote, setStickyNote] = useState("");
  const activeProblems = patient.activeProblems || [];
  const dependants = patient.dependants || [];

  if (loading && !patient.raw) return <UniversalLoader size={32} />;
  return (
    <>
      {/* Header row */}
      <div className="bg-white px-4 py-3 border border-gray-200  flex items-center justify-between">
        <div className="flex items-center gap-[10px]">
          <button
            onClick={() => navigate(-1)}
            className="
              w-6 h-6 p-1 rounded
              opacity-100
              transition-all
              flex items-center justify-center
              hover:bg-gray-100
              hover:scale-105
            "
          >
            <img
              src="/arrow-left.svg"
              alt="left arrow button"
              className="w-[16px] h-[16px] object-contain"
            />
          </button>

          <AvatarCircle name={name} size="l" />
          <div className="flex flex-col">
            <div>
              <span className="font-semibold text-gray-800 text-lg">
                {name}
              </span>
            </div>
            <div className="flex items-center text-xs text-gray-500 mt-1">
              <span className="flex items-center gap-1">
                {dob} {patient.age ? `(${patient.age})` : ""}
              </span>
              {/* Vertical line */}
              <div className="h-6 w-[1.2px] bg-gray-300 mx-2"></div>

              <span className="flex items-center gap-1">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                >
                  <path
                    d="M11.9997 9.33325C11.9997 12.2788 9.61186 14.6666 6.66634 14.6666C3.72082 14.6666 1.33301 12.2788 1.33301 9.33325C1.33301 6.38773 3.72082 3.99992 6.66634 3.99992C9.61186 3.99992 11.9997 6.38773 11.9997 9.33325Z"
                    fill="#96BFFF"
                  />
                  <path
                    d="M14.6663 1.33325H15.1663C15.1663 1.05711 14.9425 0.833252 14.6663 0.833252V1.33325ZM14.1663 4.66658C14.1663 4.94273 14.3902 5.16658 14.6663 5.16658C14.9425 5.16658 15.1663 4.94273 15.1663 4.66658H14.6663H14.1663ZM11.333 0.833252C11.0569 0.833252 10.833 1.05711 10.833 1.33325C10.833 1.60939 11.0569 1.83325 11.333 1.83325V1.33325V0.833252ZM11.9997 9.33325H11.4997C11.4997 12.0026 9.33572 14.1666 6.66634 14.1666V14.6666V15.1666C9.888 15.1666 12.4997 12.5549 12.4997 9.33325H11.9997ZM6.66634 14.6666V14.1666C3.99696 14.1666 1.83301 12.0026 1.83301 9.33325H1.33301H0.833008C0.833008 12.5549 3.44468 15.1666 6.66634 15.1666V14.6666ZM1.33301 9.33325H1.83301C1.83301 6.66388 3.99696 4.49992 6.66634 4.49992V3.99992V3.49992C3.44468 3.49992 0.833008 6.11159 0.833008 9.33325H1.33301ZM6.66634 3.99992V4.49992C9.33572 4.49992 11.4997 6.66388 11.4997 9.33325H11.9997H12.4997C12.4997 6.11159 9.888 3.49992 6.66634 3.49992V3.99992ZM10.333 5.66658L10.6866 6.02014L15.0199 1.68681L14.6663 1.33325L14.3128 0.979699L9.97945 5.31303L10.333 5.66658ZM14.6663 1.33325H14.1663V4.66658H14.6663H15.1663V1.33325H14.6663ZM11.333 1.33325V1.83325H14.6663V1.33325V0.833252H11.333V1.33325Z"
                    fill="#626060"
                  />
                </svg>
                {gender === "MALE" ? "Male" : gender === "FEMALE" ? "Female" : gender}
              </span>

              {/* Vertical line */}
              <div className="h-6 w-[1.2px] bg-gray-300 mx-2"></div>

              <span className="flex items-center gap-1">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                >
                  <path
                    d="M3.41221 7.0975L6.10283 2.82945C6.5016 2.19688 6.70099 1.88059 6.91186 1.71108C7.53855 1.20731 8.4621 1.20731 9.08879 1.71108C9.29966 1.88059 9.49905 2.19688 9.89783 2.82945L12.5884 7.0975C13.8305 9.06777 13.4943 11.5788 11.7715 13.1982C9.68873 15.156 6.31192 15.156 4.22917 13.1982C2.50639 11.5788 2.17013 9.06777 3.41221 7.0975Z"
                    fill="#96BFFF"
                  />
                  <path
                    d="M5.30304 7.99992C4.24292 9.29174 4.52992 10.9381 6.00033 11.9999M6.10283 2.82945L3.41221 7.0975C2.17013 9.06777 2.50639 11.5788 4.22917 13.1982C6.31192 15.156 9.68873 15.156 11.7715 13.1982C13.4943 11.5788 13.8305 9.06777 12.5884 7.0975L9.89783 2.82945C9.49905 2.19688 9.29966 1.88059 9.08879 1.71108C8.4621 1.20731 7.53855 1.20731 6.91186 1.71108C6.70099 1.88059 6.5016 2.19688 6.10283 2.82945Z"
                    stroke="#626060"
                    strokeLinecap="round"
                  />
                </svg>{" "}
                {blood}
              </span>

              {/* Vertical line */}
              <div className="h-6 w-[1.2px] bg-gray-300 mx-2"></div>

              <span className="text-xs text-gray-500 bg-gray-50 p-1">
                MRN: {mrn}
              </span>
            </div>
          </div>
        </div>

        <div className="flex items-center gap-3">
          <button
            onClick={handleOpenSchedule}
            className="group flex flex-col items-center"
          >
            <svg
              className="transition-transform duration-200 group-hover:scale-110 group-hover:bg-gray-100"
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
            >
              <path
                d="M5.66699 13.7864C5.66699 10.5631 5.66699 8.95149 6.6433 7.95014C7.61961 6.9488 9.19096 6.9488 12.3337 6.9488H15.667C18.8097 6.9488 20.381 6.9488 21.3573 7.95014C22.3337 8.95149 22.3337 10.5631 22.3337 13.7864V15.4958C22.3337 18.7191 22.3337 20.3307 21.3573 21.3321C20.381 22.3334 18.8097 22.3334 15.667 22.3334H12.3337C9.19096 22.3334 7.61961 22.3334 6.6433 21.3321C5.66699 20.3307 5.66699 18.7191 5.66699 15.4958V13.7864Z"
                fill="#F2F7FF"
              />
              <path
                d="M19.0003 17.7052C19.2765 17.7052 19.5003 17.4814 19.5003 17.2052C19.5003 16.9291 19.2765 16.7052 19.0003 16.7052V17.2052V17.7052ZM15.667 16.7052C15.3908 16.7052 15.167 16.9291 15.167 17.2052C15.167 17.4814 15.3909 17.7052 15.667 17.7052V17.2052L15.667 16.7052ZM17.8337 15.4958C17.8337 15.2197 17.6098 14.9958 17.3337 14.9958C17.0575 14.9958 16.8337 15.2197 16.8337 15.4958H17.3337H17.8337ZM16.8337 18.9146C16.8337 19.1908 17.0575 19.4146 17.3337 19.4146C17.6098 19.4146 17.8337 19.1908 17.8337 18.9146H17.3337H16.8337ZM9.33366 6.9488C9.33366 7.22494 9.55752 7.4488 9.83366 7.4488C10.1098 7.4488 10.3337 7.22494 10.3337 6.9488H9.83366H9.33366ZM10.3337 5.66675C10.3337 5.39061 10.1098 5.16675 9.83366 5.16675C9.55752 5.16675 9.33366 5.39061 9.33366 5.66675H9.83366H10.3337ZM17.667 6.9488C17.667 7.22494 17.8908 7.4488 18.167 7.4488C18.4431 7.4488 18.667 7.22494 18.667 6.9488H18.167H17.667ZM18.667 5.66675C18.667 5.39061 18.4431 5.16675 18.167 5.16675C17.8908 5.16675 17.667 5.39061 17.667 5.66675H18.167H18.667ZM6.08366 10.7223C5.80752 10.7223 5.58366 10.9462 5.58366 11.2223C5.58366 11.4984 5.80752 11.7223 6.08366 11.7223V11.2223V10.7223ZM21.917 11.7223C22.1931 11.7223 22.417 11.4984 22.417 11.2223C22.417 10.9462 22.1931 10.7223 21.917 10.7223V11.2223V11.7223ZM12.3337 6.9488V7.4488H15.667V6.9488V6.4488H12.3337V6.9488ZM22.3337 13.7864H21.8337V15.4958H22.3337H22.8337V13.7864H22.3337ZM15.667 22.3334V21.8334H12.3337V22.3334V22.8334H15.667V22.3334ZM5.66699 15.4958H6.16699V13.7864H5.66699H5.16699V15.4958H5.66699ZM12.3337 22.3334V21.8334C10.7478 21.8334 9.61002 21.8323 8.74439 21.7129C7.89446 21.5957 7.38162 21.3731 7.0013 20.983L6.6433 21.3321L6.2853 21.6811C6.88129 22.2924 7.64228 22.5704 8.60779 22.7036C9.55758 22.8345 10.7768 22.8334 12.3337 22.8334V22.3334ZM5.66699 15.4958H5.16699C5.16699 17.0937 5.16598 18.3411 5.29327 19.3122C5.42228 20.2963 5.69104 21.0716 6.2853 21.6811L6.6433 21.3321L7.0013 20.983C6.61926 20.5912 6.39986 20.06 6.28479 19.1822C6.168 18.2913 6.16699 17.1212 6.16699 15.4958H5.66699ZM22.3337 15.4958H21.8337C21.8337 17.1212 21.8326 18.2913 21.7159 19.1822C21.6008 20.06 21.3814 20.5912 20.9993 20.983L21.3573 21.3321L21.7153 21.6811C22.3096 21.0716 22.5784 20.2963 22.7074 19.3122C22.8347 18.3411 22.8337 17.0937 22.8337 15.4958H22.3337ZM15.667 22.3334V22.8334C17.2239 22.8334 18.4431 22.8345 19.3929 22.7036C20.3584 22.5704 21.1194 22.2924 21.7153 21.6811L21.3573 21.3321L20.9993 20.983C20.619 21.3731 20.1062 21.5957 19.2563 21.7129C18.3906 21.8323 17.2528 21.8334 15.667 21.8334V22.3334ZM15.667 6.9488V7.4488C17.2528 7.4488 18.3906 7.44992 19.2563 7.56928C20.1062 7.68648 20.619 7.90912 20.9993 8.29919L21.3573 7.95014L21.7153 7.60109C21.1194 6.98982 20.3584 6.71179 19.3929 6.57865C18.4431 6.44768 17.2239 6.4488 15.667 6.4488V6.9488ZM22.3337 13.7864H22.8337C22.8337 12.1886 22.8347 10.9411 22.7074 9.97006C22.5784 8.9859 22.3096 8.2106 21.7153 7.60109L21.3573 7.95014L20.9993 8.29919C21.3814 8.69103 21.6008 9.22222 21.7159 10.1C21.8326 10.991 21.8337 12.161 21.8337 13.7864H22.3337ZM12.3337 6.9488V6.4488C10.7768 6.4488 9.55758 6.44768 8.60779 6.57865C7.64228 6.71179 6.88129 6.98982 6.2853 7.60109L6.6433 7.95014L7.0013 8.29919C7.38162 7.90912 7.89446 7.68648 8.74439 7.56928C9.61002 7.44992 10.7478 7.4488 12.3337 7.4488V6.9488ZM5.66699 13.7864H6.16699C6.16699 12.161 6.168 10.991 6.28479 10.1C6.39986 9.22222 6.61926 8.69103 7.0013 8.29919L6.6433 7.95014L6.2853 7.60109C5.69104 8.2106 5.42228 8.9859 5.29327 9.97006C5.16598 10.9411 5.16699 12.1886 5.16699 13.7864H5.66699ZM19.0003 17.2052V16.7052H17.3337V17.2052V17.7052H19.0003V17.2052ZM17.3337 17.2052V16.7052L15.667 16.7052L15.667 17.2052V17.7052L17.3337 17.7052L17.3337 17.2052ZM17.3337 15.4958H16.8337V17.2052H17.3337H17.8337V15.4958H17.3337ZM17.3337 17.2052H16.8337V18.9146H17.3337H17.8337V17.2052H17.3337ZM9.83366 6.9488H10.3337V5.66675H9.83366H9.33366V6.9488H9.83366ZM18.167 6.9488H18.667V5.66675H18.167H17.667V6.9488H18.167ZM6.08366 11.2223V11.7223H21.917V11.2223V10.7223H6.08366V11.2223Z"
                fill="#424242"
              />
            </svg>

            <span className="text-xs text-gray-500">Schedule</span>
          </button>

          {/* Vertical line */}
          <div className="h-7 w-[1.2px] bg-gray-300 mx-2"></div>

          <button
            onClick={handleOpenAddVitals}
            className="group flex items-center flex-col"
          >
            <svg
              className="transition-transform duration-200 group-hover:scale-110 group-hover:bg-gray-100"
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
            >
              <path
                d="M5.6665 14.0001C5.6665 10.0717 5.6665 8.10752 6.88689 6.88714C8.10728 5.66675 10.0715 5.66675 13.9998 5.66675C17.9282 5.66675 19.8924 5.66675 21.1128 6.88714C22.3332 8.10752 22.3332 10.0717 22.3332 14.0001C22.3332 17.9285 22.3332 19.8926 21.1128 21.113C19.8924 22.3334 17.9282 22.3334 13.9998 22.3334C10.0715 22.3334 8.10728 22.3334 6.88689 21.113C5.6665 19.8926 5.6665 17.9285 5.6665 14.0001Z"
                fill="#F2F7FF"
              />
              <path
                d="M8.1665 16.5H9.32854C9.9835 16.5 10.311 16.5 10.5873 16.6479C10.8637 16.7958 11.0454 17.0683 11.4087 17.6133L11.5418 17.813C11.8941 18.3413 12.0702 18.6055 12.3089 18.5913C12.5476 18.5771 12.6912 18.294 12.9784 17.7277L14.6168 14.4971C14.9154 13.9082 15.0647 13.6138 15.3091 13.604C15.5534 13.5942 15.7258 13.8757 16.0706 14.4387L16.6017 15.3058C16.9591 15.8893 17.1378 16.1811 17.4225 16.3406C17.7071 16.5 18.0493 16.5 18.7336 16.5H19.8332M13.9998 22.3334C10.0715 22.3334 8.10728 22.3334 6.88689 21.113C5.6665 19.8926 5.6665 17.9285 5.6665 14.0001C5.6665 10.0717 5.6665 8.10752 6.88689 6.88714C8.10728 5.66675 10.0715 5.66675 13.9998 5.66675C17.9282 5.66675 19.8924 5.66675 21.1128 6.88714C22.3332 8.10752 22.3332 10.0717 22.3332 14.0001C22.3332 17.9285 22.3332 19.8926 21.1128 21.113C19.8924 22.3334 17.9282 22.3334 13.9998 22.3334Z"
                stroke="#424242"
                strokeLinecap="round"
              />
            </svg>
            <span className="text-xs text-gray-500">Add Vitals</span>
          </button>

          {/* Vertical line */}
          <div className="h-7 w-[1.2px] bg-gray-300 mx-2"></div>

          <button className="p-1 rounded hover:bg-gray-100">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
            >
              <path
                d="M9.83333 13.9999C9.83333 14.9204 9.08714 15.6666 8.16667 15.6666C7.24619 15.6666 6.5 14.9204 6.5 13.9999C6.5 13.0794 7.24619 12.3333 8.16667 12.3333C9.08714 12.3333 9.83333 13.0794 9.83333 13.9999Z"
                fill="#F2F7FF"
              />
              <path
                d="M15.6667 13.9999C15.6667 14.9204 14.9205 15.6666 14 15.6666C13.0795 15.6666 12.3333 14.9204 12.3333 13.9999C12.3333 13.0794 13.0795 12.3333 14 12.3333C14.9205 12.3333 15.6667 13.0794 15.6667 13.9999Z"
                fill="#F2F7FF"
              />
              <path
                d="M21.5 13.9999C21.5 14.9204 20.7538 15.6666 19.8333 15.6666C18.9129 15.6666 18.1667 14.9204 18.1667 13.9999C18.1667 13.0794 18.9129 12.3333 19.8333 12.3333C20.7538 12.3333 21.5 13.0794 21.5 13.9999Z"
                fill="#F2F7FF"
              />
              <path
                d="M9.83333 13.9999C9.83333 14.9204 9.08714 15.6666 8.16667 15.6666C7.24619 15.6666 6.5 14.9204 6.5 13.9999C6.5 13.0794 7.24619 12.3333 8.16667 12.3333C9.08714 12.3333 9.83333 13.0794 9.83333 13.9999Z"
                stroke="#424242"
                strokeLinecap="round"
              />
              <path
                d="M15.6667 13.9999C15.6667 14.9204 14.9205 15.6666 14 15.6666C13.0795 15.6666 12.3333 14.9204 12.3333 13.9999C12.3333 13.0794 13.0795 12.3333 14 12.3333C14.9205 12.3333 15.6667 13.0794 15.6667 13.9999Z"
                stroke="#424242"
                strokeLinecap="round"
              />
              <path
                d="M21.5 13.9999C21.5 14.9204 20.7538 15.6666 19.8333 15.6666C18.9129 15.6666 18.1667 14.9204 18.1667 13.9999C18.1667 13.0794 18.9129 12.3333 19.8333 12.3333C20.7538 12.3333 21.5 13.0794 21.5 13.9999Z"
                stroke="#424242"
                strokeLinecap="round"
              />
            </svg>
          </button>
        </div>
      </div>

      {/* Main split panels: left fixed 400px, right flexible â€” each has its own navigation */}
      <div className="bg-white border border-gray-200">
        <div className="">
          <div className="flex">
            {/* Left fixed column with its own nav */}
            <div className="w-[350px] flex-shrink-0 border-r border-gray-200">
              <div className="w-[100%] h-10 px-2 bg-white opacity-100 border-b-[1.5px] border-[#D6D6D6] flex gap-[4px]">
                <button
                  onClick={() => setLeftTab("overview")}
                  className={`${leftTab === "overview"
                    ? "h-10 py-1 gap-1 opacity-100 border-b-[2px] border-[#2372EC]"
                    : "h-10 py-1 gap-1 opacity-100 border-b-[1px] text-gray-600 hover:text-gray-800"
                    }`}
                >
                  Overview
                </button>
                <button
                  onClick={() => setLeftTab("demographics")}
                  className={`${leftTab === "demographics"
                    ? "h-10 px-[6px] py-1 gap-1 opacity-100 border-b-[2px] border-[#2372EC]"
                    : "h-10 px-[6px] py-1 gap-1 opacity-100 border-b-[1px] text-gray-600 hover:text-gray-800"
                    }`}
                >
                  Demographics
                </button>
              </div>

              {/* sticky notes input */}
              <div className="">
                <input
                  value={stickyNote}
                  onChange={(e) => setStickyNote(e.target.value)}
                  placeholder="Add Sticky Notes of Patient's Quick Updates"
                  className="text-[14px] w-[100%] h-9 p-[10px] gap-2.5 opacity-100 border-t-[0.5px] border-b-[0.5px] border-[#BE8B0080] focus:outline-none focus:border-[#be8b00c9] bg-[#FEF9E6]"
                />
              </div>

              {/* left content area */}
              {leftTab === "overview" && (
                <div className="w-[100%] gap-4 pt-4 px-3 pb-3 opacity-100">
                  <div className="text-sm font-semibold text-gray-800">
                    Contact Info
                  </div>

                  {/* horizontal line */}
                  <div className="border-b border-gray-300 mt-1 mb-2" />

                  <div className="flex flex-col gap-2 text-sm text-gray-700 !m-0">
                    {loading ? (
                      <div className="col-span-3 flex items-center gap-3">
                        <div className="h-5 w-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin" />{" "}
                        <div className="text-sm text-gray-600">
                          Loading contact info...
                        </div>
                      </div>
                    ) : (
                      <div className="space-y-3 mb-5">
                        <div className="flex items-center justify-between text-gray-600">
                          <div className="flex items-center gap-2">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 20 20"
                              fill="none"
                            >
                              <path
                                d="M11.2953 1.1688C11.0203 1.1438 10.7771 1.34647 10.7521 1.62148C10.7271 1.89649 10.9297 2.13969 11.2047 2.16469L11.25 1.66675L11.2953 1.1688ZM15.6694 4.3184L16.023 3.96484L15.6694 4.3184ZM17.8231 8.78308C17.8481 9.05809 18.0913 9.26076 18.3663 9.23576C18.6413 9.21076 18.844 8.96756 18.819 8.69255L18.3211 8.73782L17.8231 8.78308ZM11.9766 4.13236C11.711 4.05649 11.4343 4.21024 11.3584 4.47576C11.2826 4.74128 11.4363 5.01802 11.7018 5.09388L11.8392 4.61312L11.9766 4.13236ZM13.9016 6.08626L13.548 6.43981L13.9016 6.08626ZM14.894 8.28601C14.9698 8.55153 15.2466 8.70528 15.5121 8.62941C15.7776 8.55355 15.9314 8.27681 15.8555 8.01129L15.3747 8.14865L14.894 8.28601ZM12.5839 12.5227L12.9465 12.8671L12.9465 12.8671L12.5839 12.5227ZM12.9635 12.1232L12.6009 11.7788L12.9635 12.1232ZM14.9774 11.8437L14.7279 12.277L14.7279 12.277L14.9774 11.8437ZM16.5694 12.7601L16.32 13.1934L16.5694 12.7601ZM17.0181 15.6321L17.3806 15.9765L17.0181 15.6321ZM15.8343 16.8784L15.4717 16.5341L15.8343 16.8784ZM14.7302 17.4693L14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.15027 14.0737L6.5128 13.7294ZM2.50241 5.80503L2.00312 5.83183L2.00312 5.83183L2.50241 5.80503ZM7.65892 7.33764L8.02145 7.68199L7.65892 7.33764ZM7.89793 7.08601L8.26046 7.43035H8.26046L7.89793 7.08601ZM8.02854 4.74433L8.4368 4.45568L8.02854 4.74433ZM6.97771 3.25809L6.56945 3.54675L6.56945 3.54675L6.97771 3.25809ZM4.38454 3.00728L4.74707 3.35163H4.74707L4.38454 3.00728ZM3.07654 4.38436L2.71401 4.04002H2.71401L3.07654 4.38436ZM9.21927 10.88L9.5818 10.5357L9.21927 10.88ZM11.25 1.66675C11.2047 2.16469 11.2045 2.16467 11.2042 2.16465C11.2041 2.16464 11.2039 2.16461 11.2037 2.1646C11.2034 2.16457 11.2031 2.16454 11.2029 2.16452C11.2023 2.16447 11.2019 2.16443 11.2017 2.1644C11.2011 2.16435 11.201 2.16434 11.2014 2.16438C11.2021 2.16446 11.2047 2.16474 11.209 2.1653C11.2177 2.16641 11.2335 2.1686 11.2562 2.17237C11.3015 2.17993 11.3741 2.19382 11.4712 2.21811C11.6655 2.26667 11.9584 2.35689 12.3286 2.5214C13.0677 2.8499 14.1216 3.47768 15.3159 4.67195L15.6694 4.3184L16.023 3.96484C14.7424 2.68424 13.5866 1.9862 12.7347 1.60759C12.3094 1.41855 11.9615 1.30989 11.7138 1.24797C11.59 1.21702 11.4913 1.19776 11.4206 1.18598C11.3852 1.18009 11.3569 1.17606 11.3359 1.17338C11.3254 1.17203 11.3167 1.17103 11.3099 1.17029C11.3065 1.16991 11.3036 1.16961 11.3012 1.16937C11.2999 1.16924 11.2988 1.16914 11.2979 1.16904C11.2974 1.169 11.2969 1.16895 11.2965 1.16891C11.2963 1.16889 11.296 1.16886 11.2958 1.16885C11.2956 1.16883 11.2953 1.1688 11.25 1.66675ZM15.6694 4.3184L15.3159 4.67195C16.5101 5.86622 17.1379 6.92013 17.4664 7.65925C17.6309 8.0294 17.7211 8.32234 17.7697 8.51658C17.794 8.61374 17.8079 8.68632 17.8154 8.73163C17.8192 8.75428 17.8214 8.77012 17.8225 8.77881C17.8231 8.78315 17.8234 8.78571 17.8234 8.78644C17.8235 8.7868 17.8235 8.78671 17.8234 8.78615C17.8234 8.78587 17.8233 8.78548 17.8233 8.78497C17.8233 8.78471 17.8232 8.78443 17.8232 8.78411C17.8232 8.78395 17.8232 8.7837 17.8232 8.78362C17.8231 8.78335 17.8231 8.78308 18.3211 8.73782C18.819 8.69255 18.819 8.69226 18.819 8.69197C18.819 8.69186 18.8189 8.69156 18.8189 8.69134C18.8189 8.69091 18.8188 8.69045 18.8188 8.68996C18.8187 8.68897 18.8186 8.68787 18.8184 8.68664C18.8182 8.6842 18.8179 8.68128 18.8175 8.67789C18.8168 8.6711 18.8158 8.66244 18.8144 8.65194C18.8118 8.63093 18.8077 8.60258 18.8018 8.56723C18.7901 8.49652 18.7708 8.39785 18.7398 8.27404C18.6779 8.02634 18.5693 7.67846 18.3802 7.25312C18.0016 6.40125 17.3036 5.24545 16.023 3.96484L15.6694 4.3184ZM11.8392 4.61312C11.7018 5.09388 11.7016 5.09381 11.7014 5.09375C11.7013 5.09373 11.7011 5.09367 11.7009 5.09362C11.7007 5.09354 11.7004 5.09346 11.7001 5.09339C11.6996 5.09324 11.6991 5.0931 11.6987 5.09298C11.6979 5.09273 11.6972 5.09254 11.6968 5.0924C11.6959 5.09213 11.6958 5.0921 11.6965 5.09232C11.6979 5.09275 11.7023 5.09421 11.7099 5.09688C11.7249 5.1022 11.752 5.11237 11.7905 5.12885C11.8674 5.16181 11.9899 5.22017 12.1517 5.31594C12.475 5.5073 12.9577 5.84943 13.548 6.43981L13.9016 6.08626L14.2551 5.7327C13.6081 5.08565 13.0595 4.6912 12.661 4.45536C12.4619 4.33753 12.3008 4.25962 12.1844 4.20971C12.1262 4.18476 12.0792 4.16685 12.0443 4.15445C12.0268 4.14825 12.0124 4.14344 12.001 4.13982C11.9954 4.13801 11.9905 4.1365 11.9864 4.13526C11.9844 4.13464 11.9825 4.13409 11.9809 4.13361C11.9801 4.13337 11.9793 4.13314 11.9786 4.13294C11.9782 4.13283 11.9779 4.13273 11.9775 4.13263C11.9774 4.13259 11.9771 4.13252 11.977 4.13249C11.9768 4.13242 11.9766 4.13236 11.8392 4.61312ZM13.9016 6.08626L13.548 6.43981C14.1384 7.03019 14.4805 7.51281 14.6719 7.83615C14.7677 7.99797 14.826 8.12049 14.859 8.19738C14.8755 8.23585 14.8856 8.26298 14.891 8.27799C14.8936 8.2855 14.8951 8.28999 14.8955 8.29136C14.8957 8.29204 14.8957 8.29194 14.8954 8.29106C14.8953 8.29061 14.8951 8.28997 14.8949 8.28913C14.8947 8.28871 14.8946 8.28824 14.8945 8.28772C14.8944 8.28746 14.8943 8.28719 14.8942 8.28691C14.8942 8.28676 14.8941 8.28654 14.8941 8.28647C14.894 8.28624 14.894 8.28601 15.3747 8.14865C15.8555 8.01129 15.8554 8.01106 15.8554 8.01082C15.8553 8.01073 15.8553 8.01049 15.8552 8.01032C15.8551 8.00999 15.855 8.00964 15.8549 8.00928C15.8547 8.00856 15.8545 8.00779 15.8542 8.00697C15.8538 8.00532 15.8532 8.00348 15.8526 8.00144C15.8513 7.99735 15.8498 7.99248 15.848 7.98681C15.8444 7.97549 15.8396 7.96105 15.8334 7.94358C15.821 7.90865 15.8031 7.86166 15.7781 7.80346C15.7282 7.687 15.6503 7.52593 15.5325 7.32683C15.2966 6.92834 14.9022 6.37976 14.2551 5.7327L13.9016 6.08626ZM12.5839 12.5227L12.9465 12.8671L13.326 12.4675L12.9635 12.1232L12.6009 11.7788L12.2214 12.1784L12.5839 12.5227ZM14.9774 11.8437L14.7279 12.277L16.32 13.1934L16.5694 12.7601L16.8189 12.3267L15.2268 11.4103L14.9774 11.8437ZM17.0181 15.6321L16.6555 15.2878L15.4717 16.5341L15.8343 16.8784L16.1968 17.2228L17.3806 15.9765L17.0181 15.6321ZM14.7302 17.4693L14.6811 16.9717C13.4529 17.093 10.2926 16.9828 6.87533 13.3851L6.5128 13.7294L6.15027 14.0737C9.81099 17.9278 13.2919 18.1137 14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.87533 13.3851C3.62381 9.96181 3.07074 7.06469 3.00169 5.77823L2.50241 5.80503L2.00312 5.83183C2.08432 7.34456 2.72739 10.4701 6.15027 14.0737L6.5128 13.7294ZM7.65892 7.33764L8.02145 7.68199L8.26046 7.43035L7.89793 7.08601L7.5354 6.74166L7.29639 6.9933L7.65892 7.33764ZM8.02854 4.74433L8.4368 4.45568L7.38598 2.96944L6.97771 3.25809L6.56945 3.54675L7.62027 5.03299L8.02854 4.74433ZM4.38454 3.00728L4.02201 2.66294L2.71401 4.04002L3.07654 4.38436L3.43907 4.72871L4.74707 3.35163L4.38454 3.00728ZM7.65892 7.33764C7.29639 6.9933 7.29593 6.99379 7.29546 6.99428C7.2953 6.99445 7.29483 6.99495 7.29452 6.99529C7.29388 6.99597 7.29322 6.99666 7.29256 6.99738C7.29122 6.99882 7.28983 7.00033 7.28839 7.00191C7.28551 7.00508 7.28242 7.00855 7.27914 7.01232C7.27257 7.01987 7.26525 7.02864 7.25732 7.03865C7.24146 7.05869 7.22319 7.08374 7.20381 7.11402C7.16496 7.17474 7.12201 7.25596 7.08537 7.35893C7.01101 7.56789 6.96836 7.85023 7.02094 8.2091C7.12453 8.91614 7.59225 9.89308 8.85674 11.2243L9.21927 10.88L9.5818 10.5357C8.38378 9.27436 8.07132 8.48012 8.01037 8.06413C7.98068 7.86147 8.00965 7.74433 8.0275 7.69418C8.03696 7.6676 8.04525 7.65437 8.04612 7.65301C8.0466 7.65226 8.04531 7.65438 8.04146 7.65923C8.03954 7.66166 8.03698 7.66478 8.03368 7.66857C8.03203 7.67047 8.03019 7.67254 8.02816 7.67477C8.02714 7.67589 8.02608 7.67705 8.02496 7.67825C8.0244 7.67885 8.02383 7.67947 8.02324 7.68009C8.02295 7.6804 8.0225 7.68087 8.02236 7.68103C8.0219 7.68151 8.02145 7.68199 7.65892 7.33764ZM9.21927 10.88L8.85674 11.2243C10.1182 12.5525 11.0532 13.0548 11.7449 13.1671C12.0984 13.2245 12.3793 13.1781 12.5879 13.0958C12.6902 13.0554 12.7703 13.0084 12.8296 12.9663C12.8592 12.9453 12.8836 12.9256 12.9029 12.9087C12.9126 12.9002 12.921 12.8923 12.9283 12.8854C12.9319 12.8819 12.9352 12.8786 12.9383 12.8755C12.9398 12.874 12.9412 12.8725 12.9426 12.8711C12.9433 12.8704 12.9439 12.8697 12.9446 12.8691C12.9449 12.8687 12.9454 12.8682 12.9455 12.8681C12.946 12.8676 12.9465 12.8671 12.5839 12.5227C12.2214 12.1784 12.2219 12.1779 12.2223 12.1775C12.2225 12.1773 12.2229 12.1768 12.2232 12.1765C12.2238 12.1759 12.2244 12.1753 12.225 12.1747C12.2261 12.1735 12.2272 12.1724 12.2283 12.1713C12.2304 12.1692 12.2324 12.1672 12.2343 12.1654C12.2379 12.1619 12.241 12.1591 12.2435 12.1569C12.2484 12.1526 12.251 12.1507 12.2511 12.1507C12.2514 12.1504 12.2418 12.1573 12.221 12.1655C12.1835 12.1803 12.085 12.2093 11.9052 12.18C11.5302 12.1191 10.7828 11.8001 9.5818 10.5357L9.21927 10.88ZM6.97771 3.25809L7.38598 2.96944C6.58309 1.83386 4.98522 1.64886 4.02201 2.66294L4.38454 3.00728L4.74707 3.35163C5.24138 2.83121 6.10072 2.8838 6.56945 3.54675L6.97771 3.25809ZM2.50241 5.80503L3.00169 5.77823C2.98153 5.40261 3.14587 5.03739 3.43907 4.72871L3.07654 4.38436L2.71401 4.04002C2.28451 4.4922 1.96456 5.1133 2.00312 5.83183L2.50241 5.80503ZM15.8343 16.8784L15.4717 16.5341C15.2255 16.7933 14.9562 16.9446 14.6811 16.9717L14.7302 17.4693L14.7793 17.9669C15.3633 17.9093 15.841 17.5973 16.1968 17.2228L15.8343 16.8784ZM7.89793 7.08601L8.26046 7.43035C9.02327 6.62726 9.08003 5.36543 8.4368 4.45568L8.02854 4.74433L7.62027 5.03299C8.00444 5.57634 7.95019 6.30498 7.5354 6.74166L7.89793 7.08601ZM16.5694 12.7601L16.32 13.1934C17.0717 13.6261 17.2239 14.6894 16.6555 15.2878L17.0181 15.6321L17.3806 15.9765C18.4104 14.8923 18.112 13.071 16.8189 12.3267L16.5694 12.7601ZM12.9635 12.1232L13.326 12.4675C13.6879 12.0865 14.2519 12.003 14.7279 12.277L14.9774 11.8437L15.2268 11.4103C14.3602 10.9115 13.2884 11.0551 12.6009 11.7788L12.9635 12.1232Z"
                                fill="#626060"
                              />
                            </svg>{" "}
                            {patient.contact || "+91 0123456789"}{" "}
                            {patient.contact ? (
                              <Badge size="s" type="ghost" color="yellow">
                                Primary
                              </Badge>
                            ) : (
                              "-"
                            )}
                          </div>
                          {patient.contact !== "-" ? (
                            <img
                              src="/check_circle.svg"
                              width="14"
                              height="14"
                              alt="Primary contact verified"
                            />
                          ) : (
                            "-"
                          )}
                        </div>
                        {patient.secondaryContact ? (
                          <div className="flex items-center justify-between text-gray-600">
                            <div className="flex items-center gap-2">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none"
                              >
                                <path
                                  d="M11.2953 1.1688C11.0203 1.1438 10.7771 1.34647 10.7521 1.62148C10.7271 1.89649 10.9297 2.13969 11.2047 2.16469L11.25 1.66675L11.2953 1.1688ZM15.6694 4.3184L16.023 3.96484L15.6694 4.3184ZM17.8231 8.78308C17.8481 9.05809 18.0913 9.26076 18.3663 9.23576C18.6413 9.21076 18.844 8.96756 18.819 8.69255L18.3211 8.73782L17.8231 8.78308ZM11.9766 4.13236C11.711 4.05649 11.4343 4.21024 11.3584 4.47576C11.2826 4.74128 11.4363 5.01802 11.7018 5.09388L11.8392 4.61312L11.9766 4.13236ZM13.9016 6.08626L13.548 6.43981L13.9016 6.08626ZM14.894 8.28601C14.9698 8.55153 15.2466 8.70528 15.5121 8.62941C15.7776 8.55355 15.9314 8.27681 15.8555 8.01129L15.3747 8.14865L14.894 8.28601ZM12.5839 12.5227L12.9465 12.8671L12.9465 12.8671L12.5839 12.5227ZM12.9635 12.1232L12.6009 11.7788L12.9635 12.1232ZM14.9774 11.8437L14.7279 12.277L14.7279 12.277L14.9774 11.8437ZM16.5694 12.7601L16.32 13.1934L16.5694 12.7601ZM17.0181 15.6321L17.3806 15.9765L17.0181 15.6321ZM15.8343 16.8784L15.4717 16.5341L15.8343 16.8784ZM14.7302 17.4693L14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.15027 14.0737L6.5128 13.7294ZM2.50241 5.80503L2.00312 5.83183L2.00312 5.83183L2.50241 5.80503ZM7.65892 7.33764L8.02145 7.68199L7.65892 7.33764ZM7.89793 7.08601L8.26046 7.43035H8.26046L7.89793 7.08601ZM8.02854 4.74433L8.4368 4.45568L8.02854 4.74433ZM6.97771 3.25809L6.56945 3.54675L6.56945 3.54675L6.97771 3.25809ZM4.38454 3.00728L4.74707 3.35163H4.74707L4.38454 3.00728ZM3.07654 4.38436L2.71401 4.04002H2.71401L3.07654 4.38436ZM9.21927 10.88L9.5818 10.5357L9.21927 10.88ZM11.25 1.66675C11.2047 2.16469 11.2045 2.16467 11.2042 2.16465C11.2041 2.16464 11.2039 2.16461 11.2037 2.1646C11.2034 2.16457 11.2031 2.16454 11.2029 2.16452C11.2023 2.16447 11.2019 2.16443 11.2017 2.1644C11.2011 2.16435 11.201 2.16434 11.2014 2.16438C11.2021 2.16446 11.2047 2.16474 11.209 2.1653C11.2177 2.16641 11.2335 2.1686 11.2562 2.17237C11.3015 2.17993 11.3741 2.19382 11.4712 2.21811C11.6655 2.26667 11.9584 2.35689 12.3286 2.5214C13.0677 2.8499 14.1216 3.47768 15.3159 4.67195L15.6694 4.3184L16.023 3.96484C14.7424 2.68424 13.5866 1.9862 12.7347 1.60759C12.3094 1.41855 11.9615 1.30989 11.7138 1.24797C11.59 1.21702 11.4913 1.19776 11.4206 1.18598C11.3852 1.18009 11.3569 1.17606 11.3359 1.17338C11.3254 1.17203 11.3167 1.17103 11.3099 1.17029C11.3065 1.16991 11.3036 1.16961 11.3012 1.16937C11.2999 1.16924 11.2988 1.16914 11.2979 1.16904C11.2974 1.169 11.2969 1.16895 11.2965 1.16891C11.2963 1.16889 11.296 1.16886 11.2958 1.16885C11.2956 1.16883 11.2953 1.1688 11.25 1.66675ZM15.6694 4.3184L15.3159 4.67195C16.5101 5.86622 17.1379 6.92013 17.4664 7.65925C17.6309 8.0294 17.7211 8.32234 17.7697 8.51658C17.794 8.61374 17.8079 8.68632 17.8154 8.73163C17.8192 8.75428 17.8214 8.77012 17.8225 8.77881C17.8231 8.78315 17.8234 8.78571 17.8234 8.78644C17.8235 8.7868 17.8235 8.78671 17.8234 8.78615C17.8234 8.78587 17.8233 8.78548 17.8233 8.78497C17.8233 8.78471 17.8232 8.78443 17.8232 8.78411C17.8232 8.78395 17.8232 8.7837 17.8232 8.78362C17.8231 8.78335 17.8231 8.78308 18.3211 8.73782C18.819 8.69255 18.819 8.69226 18.819 8.69197C18.819 8.69186 18.8189 8.69156 18.8189 8.69134C18.8189 8.69091 18.8188 8.69045 18.8188 8.68996C18.8187 8.68897 18.8186 8.68787 18.8184 8.68664C18.8182 8.6842 18.8179 8.68128 18.8175 8.67789C18.8168 8.6711 18.8158 8.66244 18.8144 8.65194C18.8118 8.63093 18.8077 8.60258 18.8018 8.56723C18.7901 8.49652 18.7708 8.39785 18.7398 8.27404C18.6779 8.02634 18.5693 7.67846 18.3802 7.25312C18.0016 6.40125 17.3036 5.24545 16.023 3.96484L15.6694 4.3184ZM11.8392 4.61312C11.7018 5.09388 11.7016 5.09381 11.7014 5.09375C11.7013 5.09373 11.7011 5.09367 11.7009 5.09362C11.7007 5.09354 11.7004 5.09346 11.7001 5.09339C11.6996 5.09324 11.6991 5.0931 11.6987 5.09298C11.6979 5.09273 11.6972 5.09254 11.6968 5.0924C11.6959 5.09213 11.6958 5.0921 11.6965 5.09232C11.6979 5.09275 11.7023 5.09421 11.7099 5.09688C11.7249 5.1022 11.752 5.11237 11.7905 5.12885C11.8674 5.16181 11.9899 5.22017 12.1517 5.31594C12.475 5.5073 12.9577 5.84943 13.548 6.43981L13.9016 6.08626L14.2551 5.7327C13.6081 5.08565 13.0595 4.6912 12.661 4.45536C12.4619 4.33753 12.3008 4.25962 12.1844 4.20971C12.1262 4.18476 12.0792 4.16685 12.0443 4.15445C12.0268 4.14825 12.0124 4.14344 12.001 4.13982C11.9954 4.13801 11.9905 4.1365 11.9864 4.13526C11.9844 4.13464 11.9825 4.13409 11.9809 4.13361C11.9801 4.13337 11.9793 4.13314 11.9786 4.13294C11.9782 4.13283 11.9779 4.13273 11.9775 4.13263C11.9774 4.13259 11.9771 4.13252 11.977 4.13249C11.9768 4.13242 11.9766 4.13236 11.8392 4.61312ZM13.9016 6.08626L13.548 6.43981C14.1384 7.03019 14.4805 7.51281 14.6719 7.83615C14.7677 7.99797 14.826 8.12049 14.859 8.19738C14.8755 8.23585 14.8856 8.26298 14.891 8.27799C14.8936 8.2855 14.8951 8.28999 14.8955 8.29136C14.8957 8.29204 14.8957 8.29194 14.8954 8.29106C14.8953 8.29061 14.8951 8.28997 14.8949 8.28913C14.8947 8.28871 14.8946 8.28824 14.8945 8.28772C14.8944 8.28746 14.8943 8.28719 14.8942 8.28691C14.8942 8.28676 14.8941 8.28654 14.8941 8.28647C14.894 8.28624 14.894 8.28601 15.3747 8.14865C15.8555 8.01129 15.8554 8.01106 15.8554 8.01082C15.8553 8.01073 15.8553 8.01049 15.8552 8.01032C15.8551 8.00999 15.855 8.00964 15.8549 8.00928C15.8547 8.00856 15.8545 8.00779 15.8542 8.00697C15.8538 8.00532 15.8532 8.00348 15.8526 8.00144C15.8513 7.99735 15.8498 7.99248 15.848 7.98681C15.8444 7.97549 15.8396 7.96105 15.8334 7.94358C15.821 7.90865 15.8031 7.86166 15.7781 7.80346C15.7282 7.687 15.6503 7.52593 15.5325 7.32683C15.2966 6.92834 14.9022 6.37976 14.2551 5.7327L13.9016 6.08626ZM12.5839 12.5227L12.9465 12.8671L13.326 12.4675L12.9635 12.1232L12.6009 11.7788L12.2214 12.1784L12.5839 12.5227ZM14.9774 11.8437L14.7279 12.277L16.32 13.1934L16.5694 12.7601L16.8189 12.3267L15.2268 11.4103L14.9774 11.8437ZM17.0181 15.6321L16.6555 15.2878L15.4717 16.5341L15.8343 16.8784L16.1968 17.2228L17.3806 15.9765L17.0181 15.6321ZM14.7302 17.4693L14.6811 16.9717C13.4529 17.093 10.2926 16.9828 6.87533 13.3851L6.5128 13.7294L6.15027 14.0737C9.81099 17.9278 13.2919 18.1137 14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.87533 13.3851C3.62381 9.96181 3.07074 7.06469 3.00169 5.77823L2.50241 5.80503L2.00312 5.83183C2.08432 7.34456 2.72739 10.4701 6.15027 14.0737L6.5128 13.7294ZM7.65892 7.33764L8.02145 7.68199L8.26046 7.43035L7.89793 7.08601L7.5354 6.74166L7.29639 6.9933L7.65892 7.33764ZM8.02854 4.74433L8.4368 4.45568L7.38598 2.96944L6.97771 3.25809L6.56945 3.54675L7.62027 5.03299L8.02854 4.74433ZM4.38454 3.00728L4.02201 2.66294L2.71401 4.04002L3.07654 4.38436L3.43907 4.72871L4.74707 3.35163L4.38454 3.00728ZM7.65892 7.33764C7.29639 6.9933 7.29593 6.99379 7.29546 6.99428C7.2953 6.99445 7.29483 6.99495 7.29452 6.99529C7.29388 6.99597 7.29322 6.99666 7.29256 6.99738C7.29122 6.99882 7.28983 7.00033 7.28839 7.00191C7.28551 7.00508 7.28242 7.00855 7.27914 7.01232C7.27257 7.01987 7.26525 7.02864 7.25732 7.03865C7.24146 7.05869 7.22319 7.08374 7.20381 7.11402C7.16496 7.17474 7.12201 7.25596 7.08537 7.35893C7.01101 7.56789 6.96836 7.85023 7.02094 8.2091C7.12453 8.91614 7.59225 9.89308 8.85674 11.2243L9.21927 10.88L9.5818 10.5357C8.38378 9.27436 8.07132 8.48012 8.01037 8.06413C7.98068 7.86147 8.00965 7.74433 8.0275 7.69418C8.03696 7.6676 8.04525 7.65437 8.04612 7.65301C8.0466 7.65226 8.04531 7.65438 8.04146 7.65923C8.03954 7.66166 8.03698 7.66478 8.03368 7.66857C8.03203 7.67047 8.03019 7.67254 8.02816 7.67477C8.02714 7.67589 8.02608 7.67705 8.02496 7.67825C8.0244 7.67885 8.02383 7.67947 8.02324 7.68009C8.02295 7.6804 8.0225 7.68087 8.02236 7.68103C8.0219 7.68151 8.02145 7.68199 7.65892 7.33764ZM9.21927 10.88L8.85674 11.2243C10.1182 12.5525 11.0532 13.0548 11.7449 13.1671C12.0984 13.2245 12.3793 13.1781 12.5879 13.0958C12.6902 13.0554 12.7703 13.0084 12.8296 12.9663C12.8592 12.9453 12.8836 12.9256 12.9029 12.9087C12.9126 12.9002 12.921 12.8923 12.9283 12.8854C12.9319 12.8819 12.9352 12.8786 12.9383 12.8755C12.9398 12.874 12.9412 12.8725 12.9426 12.8711C12.9433 12.8704 12.9439 12.8697 12.9446 12.8691C12.9449 12.8687 12.9454 12.8682 12.9455 12.8681C12.946 12.8676 12.9465 12.8671 12.5839 12.5227C12.2214 12.1784 12.2219 12.1779 12.2223 12.1775C12.2225 12.1773 12.2229 12.1768 12.2232 12.1765C12.2238 12.1759 12.2244 12.1753 12.225 12.1747C12.2261 12.1735 12.2272 12.1724 12.2283 12.1713C12.2304 12.1692 12.2324 12.1672 12.2343 12.1654C12.2379 12.1619 12.241 12.1591 12.2435 12.1569C12.2484 12.1526 12.251 12.1507 12.2511 12.1507C12.2514 12.1504 12.2418 12.1573 12.221 12.1655C12.1835 12.1803 12.085 12.2093 11.9052 12.18C11.5302 12.1191 10.7828 11.8001 9.5818 10.5357L9.21927 10.88ZM6.97771 3.25809L7.38598 2.96944C6.58309 1.83386 4.98522 1.64886 4.02201 2.66294L4.38454 3.00728L4.74707 3.35163C5.24138 2.83121 6.10072 2.8838 6.56945 3.54675L6.97771 3.25809ZM2.50241 5.80503L3.00169 5.77823C2.98153 5.40261 3.14587 5.03739 3.43907 4.72871L3.07654 4.38436L2.71401 4.04002C2.28451 4.4922 1.96456 5.1133 2.00312 5.83183L2.50241 5.80503ZM15.8343 16.8784L15.4717 16.5341C15.2255 16.7933 14.9562 16.9446 14.6811 16.9717L14.7302 17.4693L14.7793 17.9669C15.3633 17.9093 15.841 17.5973 16.1968 17.2228L15.8343 16.8784ZM7.89793 7.08601L8.26046 7.43035C9.02327 6.62726 9.08003 5.36543 8.4368 4.45568L8.02854 4.74433L7.62027 5.03299C8.00444 5.57634 7.95019 6.30498 7.5354 6.74166L7.89793 7.08601ZM16.5694 12.7601L16.32 13.1934C17.0717 13.6261 17.2239 14.6894 16.6555 15.2878L17.0181 15.6321L17.3806 15.9765C18.4104 14.8923 18.112 13.071 16.8189 12.3267L16.5694 12.7601ZM12.9635 12.1232L13.326 12.4675C13.6879 12.0865 14.2519 12.003 14.7279 12.277L14.9774 11.8437L15.2268 11.4103C14.3602 10.9115 13.2884 11.0551 12.6009 11.7788L12.9635 12.1232Z"
                                  fill="#626060"
                                />
                              </svg>
                              {patient.secondaryContact || "-"}{" "}
                              {patient.secondaryContact && (
                                <Badge size="s" type="ghost" color="grey">
                                  Secondary
                                </Badge>
                              )}
                            </div>
                          </div>
                        ) : (
                          <div className="flex items-center justify-between text-gray-600">
                            <div className="flex items-center gap-2">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none"
                              >
                                <path
                                  d="M11.2953 1.1688C11.0203 1.1438 10.7771 1.34647 10.7521 1.62148C10.7271 1.89649 10.9297 2.13969 11.2047 2.16469L11.25 1.66675L11.2953 1.1688ZM15.6694 4.3184L16.023 3.96484L15.6694 4.3184ZM17.8231 8.78308C17.8481 9.05809 18.0913 9.26076 18.3663 9.23576C18.6413 9.21076 18.844 8.96756 18.819 8.69255L18.3211 8.73782L17.8231 8.78308ZM11.9766 4.13236C11.711 4.05649 11.4343 4.21024 11.3584 4.47576C11.2826 4.74128 11.4363 5.01802 11.7018 5.09388L11.8392 4.61312L11.9766 4.13236ZM13.9016 6.08626L13.548 6.43981L13.9016 6.08626ZM14.894 8.28601C14.9698 8.55153 15.2466 8.70528 15.5121 8.62941C15.7776 8.55355 15.9314 8.27681 15.8555 8.01129L15.3747 8.14865L14.894 8.28601ZM12.5839 12.5227L12.9465 12.8671L12.9465 12.8671L12.5839 12.5227ZM12.9635 12.1232L12.6009 11.7788L12.9635 12.1232ZM14.9774 11.8437L14.7279 12.277L14.7279 12.277L14.9774 11.8437ZM16.5694 12.7601L16.32 13.1934L16.5694 12.7601ZM17.0181 15.6321L17.3806 15.9765L17.0181 15.6321ZM15.8343 16.8784L15.4717 16.5341L15.8343 16.8784ZM14.7302 17.4693L14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.15027 14.0737L6.5128 13.7294ZM2.50241 5.80503L2.00312 5.83183L2.00312 5.83183L2.50241 5.80503ZM7.65892 7.33764L8.02145 7.68199L7.65892 7.33764ZM7.89793 7.08601L8.26046 7.43035H8.26046L7.89793 7.08601ZM8.02854 4.74433L8.4368 4.45568L8.02854 4.74433ZM6.97771 3.25809L6.56945 3.54675L6.56945 3.54675L6.97771 3.25809ZM4.38454 3.00728L4.74707 3.35163H4.74707L4.38454 3.00728ZM3.07654 4.38436L2.71401 4.04002H2.71401L3.07654 4.38436ZM9.21927 10.88L9.5818 10.5357L9.21927 10.88ZM11.25 1.66675C11.2047 2.16469 11.2045 2.16467 11.2042 2.16465C11.2041 2.16464 11.2039 2.16461 11.2037 2.1646C11.2034 2.16457 11.2031 2.16454 11.2029 2.16452C11.2023 2.16447 11.2019 2.16443 11.2017 2.1644C11.2011 2.16435 11.201 2.16434 11.2014 2.16438C11.2021 2.16446 11.2047 2.16474 11.209 2.1653C11.2177 2.16641 11.2335 2.1686 11.2562 2.17237C11.3015 2.17993 11.3741 2.19382 11.4712 2.21811C11.6655 2.26667 11.9584 2.35689 12.3286 2.5214C13.0677 2.8499 14.1216 3.47768 15.3159 4.67195L15.6694 4.3184L16.023 3.96484C14.7424 2.68424 13.5866 1.9862 12.7347 1.60759C12.3094 1.41855 11.9615 1.30989 11.7138 1.24797C11.59 1.21702 11.4913 1.19776 11.4206 1.18598C11.3852 1.18009 11.3569 1.17606 11.3359 1.17338C11.3254 1.17203 11.3167 1.17103 11.3099 1.17029C11.3065 1.16991 11.3036 1.16961 11.3012 1.16937C11.2999 1.16924 11.2988 1.16914 11.2979 1.16904C11.2974 1.169 11.2969 1.16895 11.2965 1.16891C11.2963 1.16889 11.296 1.16886 11.2958 1.16885C11.2956 1.16883 11.2953 1.1688 11.25 1.66675ZM15.6694 4.3184L15.3159 4.67195C16.5101 5.86622 17.1379 6.92013 17.4664 7.65925C17.6309 8.0294 17.7211 8.32234 17.7697 8.51658C17.794 8.61374 17.8079 8.68632 17.8154 8.73163C17.8192 8.75428 17.8214 8.77012 17.8225 8.77881C17.8231 8.78315 17.8234 8.78571 17.8234 8.78644C17.8235 8.7868 17.8235 8.78671 17.8234 8.78615C17.8234 8.78587 17.8233 8.78548 17.8233 8.78497C17.8233 8.78471 17.8232 8.78443 17.8232 8.78411C17.8232 8.78395 17.8232 8.7837 17.8232 8.78362C17.8231 8.78335 17.8231 8.78308 18.3211 8.73782C18.819 8.69255 18.819 8.69226 18.819 8.69197C18.819 8.69186 18.8189 8.69156 18.8189 8.69134C18.8189 8.69091 18.8188 8.69045 18.8188 8.68996C18.8187 8.68897 18.8186 8.68787 18.8184 8.68664C18.8182 8.6842 18.8179 8.68128 18.8175 8.67789C18.8168 8.6711 18.8158 8.66244 18.8144 8.65194C18.8118 8.63093 18.8077 8.60258 18.8018 8.56723C18.7901 8.49652 18.7708 8.39785 18.7398 8.27404C18.6779 8.02634 18.5693 7.67846 18.3802 7.25312C18.0016 6.40125 17.3036 5.24545 16.023 3.96484L15.6694 4.3184ZM11.8392 4.61312C11.7018 5.09388 11.7016 5.09381 11.7014 5.09375C11.7013 5.09373 11.7011 5.09367 11.7009 5.09362C11.7007 5.09354 11.7004 5.09346 11.7001 5.09339C11.6996 5.09324 11.6991 5.0931 11.6987 5.09298C11.6979 5.09273 11.6972 5.09254 11.6968 5.0924C11.6959 5.09213 11.6958 5.0921 11.6965 5.09232C11.6979 5.09275 11.7023 5.09421 11.7099 5.09688C11.7249 5.1022 11.752 5.11237 11.7905 5.12885C11.8674 5.16181 11.9899 5.22017 12.1517 5.31594C12.475 5.5073 12.9577 5.84943 13.548 6.43981L13.9016 6.08626L14.2551 5.7327C13.6081 5.08565 13.0595 4.6912 12.661 4.45536C12.4619 4.33753 12.3008 4.25962 12.1844 4.20971C12.1262 4.18476 12.0792 4.16685 12.0443 4.15445C12.0268 4.14825 12.0124 4.14344 12.001 4.13982C11.9954 4.13801 11.9905 4.1365 11.9864 4.13526C11.9844 4.13464 11.9825 4.13409 11.9809 4.13361C11.9801 4.13337 11.9793 4.13314 11.9786 4.13294C11.9782 4.13283 11.9779 4.13273 11.9775 4.13263C11.9774 4.13259 11.9771 4.13252 11.977 4.13249C11.9768 4.13242 11.9766 4.13236 11.8392 4.61312ZM13.9016 6.08626L13.548 6.43981C14.1384 7.03019 14.4805 7.51281 14.6719 7.83615C14.7677 7.99797 14.826 8.12049 14.859 8.19738C14.8755 8.23585 14.8856 8.26298 14.891 8.27799C14.8936 8.2855 14.8951 8.28999 14.8955 8.29136C14.8957 8.29204 14.8957 8.29194 14.8954 8.29106C14.8953 8.29061 14.8951 8.28997 14.8949 8.28913C14.8947 8.28871 14.8946 8.28824 14.8945 8.28772C14.8944 8.28746 14.8943 8.28719 14.8942 8.28691C14.8942 8.28676 14.8941 8.28654 14.8941 8.28647C14.894 8.28624 14.894 8.28601 15.3747 8.14865C15.8555 8.01129 15.8554 8.01106 15.8554 8.01082C15.8553 8.01073 15.8553 8.01049 15.8552 8.01032C15.8551 8.00999 15.855 8.00964 15.8549 8.00928C15.8547 8.00856 15.8545 8.00779 15.8542 8.00697C15.8538 8.00532 15.8532 8.00348 15.8526 8.00144C15.8513 7.99735 15.8498 7.99248 15.848 7.98681C15.8444 7.97549 15.8396 7.96105 15.8334 7.94358C15.821 7.90865 15.8031 7.86166 15.7781 7.80346C15.7282 7.687 15.6503 7.52593 15.5325 7.32683C15.2966 6.92834 14.9022 6.37976 14.2551 5.7327L13.9016 6.08626ZM12.5839 12.5227L12.9465 12.8671L13.326 12.4675L12.9635 12.1232L12.6009 11.7788L12.2214 12.1784L12.5839 12.5227ZM14.9774 11.8437L14.7279 12.277L16.32 13.1934L16.5694 12.7601L16.8189 12.3267L15.2268 11.4103L14.9774 11.8437ZM17.0181 15.6321L16.6555 15.2878L15.4717 16.5341L15.8343 16.8784L16.1968 17.2228L17.3806 15.9765L17.0181 15.6321ZM14.7302 17.4693L14.6811 16.9717C13.4529 17.093 10.2926 16.9828 6.87533 13.3851L6.5128 13.7294L6.15027 14.0737C9.81099 17.9278 13.2919 18.1137 14.7793 17.9669L14.7302 17.4693ZM6.5128 13.7294L6.87533 13.3851C3.62381 9.96181 3.07074 7.06469 3.00169 5.77823L2.50241 5.80503L2.00312 5.83183C2.08432 7.34456 2.72739 10.4701 6.15027 14.0737L6.5128 13.7294ZM7.65892 7.33764L8.02145 7.68199L8.26046 7.43035L7.89793 7.08601L7.5354 6.74166L7.29639 6.9933L7.65892 7.33764ZM8.02854 4.74433L8.4368 4.45568L7.38598 2.96944L6.97771 3.25809L6.56945 3.54675L7.62027 5.03299L8.02854 4.74433ZM4.38454 3.00728L4.02201 2.66294L2.71401 4.04002L3.07654 4.38436L3.43907 4.72871L4.74707 3.35163L4.38454 3.00728ZM7.65892 7.33764C7.29639 6.9933 7.29593 6.99379 7.29546 6.99428C7.2953 6.99445 7.29483 6.99495 7.29452 6.99529C7.29388 6.99597 7.29322 6.99666 7.29256 6.99738C7.29122 6.99882 7.28983 7.00033 7.28839 7.00191C7.28551 7.00508 7.28242 7.00855 7.27914 7.01232C7.27257 7.01987 7.26525 7.02864 7.25732 7.03865C7.24146 7.05869 7.22319 7.08374 7.20381 7.11402C7.16496 7.17474 7.12201 7.25596 7.08537 7.35893C7.01101 7.56789 6.96836 7.85023 7.02094 8.2091C7.12453 8.91614 7.59225 9.89308 8.85674 11.2243L9.21927 10.88L9.5818 10.5357C8.38378 9.27436 8.07132 8.48012 8.01037 8.06413C7.98068 7.86147 8.00965 7.74433 8.0275 7.69418C8.03696 7.6676 8.04525 7.65437 8.04612 7.65301C8.0466 7.65226 8.04531 7.65438 8.04146 7.65923C8.03954 7.66166 8.03698 7.66478 8.03368 7.66857C8.03203 7.67047 8.03019 7.67254 8.02816 7.67477C8.02714 7.67589 8.02608 7.67705 8.02496 7.67825C8.0244 7.67885 8.02383 7.67947 8.02324 7.68009C8.02295 7.6804 8.0225 7.68087 8.02236 7.68103C8.0219 7.68151 8.02145 7.68199 7.65892 7.33764ZM9.21927 10.88L8.85674 11.2243C10.1182 12.5525 11.0532 13.0548 11.7449 13.1671C12.0984 13.2245 12.3793 13.1781 12.5879 13.0958C12.6902 13.0554 12.7703 13.0084 12.8296 12.9663C12.8592 12.9453 12.8836 12.9256 12.9029 12.9087C12.9126 12.9002 12.921 12.8923 12.9283 12.8854C12.9319 12.8819 12.9352 12.8786 12.9383 12.8755C12.9398 12.874 12.9412 12.8725 12.9426 12.8711C12.9433 12.8704 12.9439 12.8697 12.9446 12.8691C12.9449 12.8687 12.9454 12.8682 12.9455 12.8681C12.946 12.8676 12.9465 12.8671 12.5839 12.5227C12.2214 12.1784 12.2219 12.1779 12.2223 12.1775C12.2225 12.1773 12.2229 12.1768 12.2232 12.1765C12.2238 12.1759 12.2244 12.1753 12.225 12.1747C12.2261 12.1735 12.2272 12.1724 12.2283 12.1713C12.2304 12.1692 12.2324 12.1672 12.2343 12.1654C12.2379 12.1619 12.241 12.1591 12.2435 12.1569C12.2484 12.1526 12.251 12.1507 12.2511 12.1507C12.2514 12.1504 12.2418 12.1573 12.221 12.1655C12.1835 12.1803 12.085 12.2093 11.9052 12.18C11.5302 12.1191 10.7828 11.8001 9.5818 10.5357L9.21927 10.88ZM6.97771 3.25809L7.38598 2.96944C6.58309 1.83386 4.98522 1.64886 4.02201 2.66294L4.38454 3.00728L4.74707 3.35163C5.24138 2.83121 6.10072 2.8838 6.56945 3.54675L6.97771 3.25809ZM2.50241 5.80503L3.00169 5.77823C2.98153 5.40261 3.14587 5.03739 3.43907 4.72871L3.07654 4.38436L2.71401 4.04002C2.28451 4.4922 1.96456 5.1133 2.00312 5.83183L2.50241 5.80503ZM15.8343 16.8784L15.4717 16.5341C15.2255 16.7933 14.9562 16.9446 14.6811 16.9717L14.7302 17.4693L14.7793 17.9669C15.3633 17.9093 15.841 17.5973 16.1968 17.2228L15.8343 16.8784ZM7.89793 7.08601L8.26046 7.43035C9.02327 6.62726 9.08003 5.36543 8.4368 4.45568L8.02854 4.74433L7.62027 5.03299C8.00444 5.57634 7.95019 6.30498 7.5354 6.74166L7.89793 7.08601ZM16.5694 12.7601L16.32 13.1934C17.0717 13.6261 17.2239 14.6894 16.6555 15.2878L17.0181 15.6321L17.3806 15.9765C18.4104 14.8923 18.112 13.071 16.8189 12.3267L16.5694 12.7601ZM12.9635 12.1232L13.326 12.4675C13.6879 12.0865 14.2519 12.003 14.7279 12.277L14.9774 11.8437L15.2268 11.4103C14.3602 10.9115 13.2884 11.0551 12.6009 11.7788L12.9635 12.1232Z"
                                  fill="#626060"
                                />
                              </svg>
                              {patient.secondaryContact || "-"}{" "}
                              {patient.secondaryContact && (
                                <Badge size="s" type="ghost" color="grey">
                                  Secondary
                                </Badge>
                              )}
                            </div>
                          </div>
                        )}
                        <div className="flex items-center justify-between text-gray-600">
                          <div className="flex items-center gap-2">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 20 20"
                              fill="none"
                            >
                              <path
                                d="M5.00033 6.66659L6.79941 8.16582C8.32993 9.44126 9.0952 10.079 10.0003 10.079C10.9055 10.079 11.6707 9.44126 13.2012 8.16582L15.0003 6.66659M8.33366 16.6666H11.667C14.8097 16.6666 16.381 16.6666 17.3573 15.6903C18.3337 14.714 18.3337 13.1426 18.3337 9.99992C18.3337 6.85722 18.3337 5.28587 17.3573 4.30956C16.381 3.33325 14.8097 3.33325 11.667 3.33325H8.33366C5.19096 3.33325 3.61961 3.33325 2.6433 4.30956C1.66699 5.28587 1.66699 6.85722 1.66699 9.99992C1.66699 13.1426 1.66699 14.714 2.6433 15.6903C3.61961 16.6666 5.19096 16.6666 8.33366 16.6666Z"
                                stroke="#626060"
                                strokeLinecap="round"
                              />
                            </svg>
                            {patient.email || "-"}
                          </div>
                          {patient.email !== "-" ? (
                            <img
                              src="/check_circle.svg"
                              width="14"
                              height="14"
                              alt="Primary contact verified"
                            />
                          ) : (
                            "-"
                          )}
                        </div>
                        <div className="flex items-center justify-between text-gray-600">
                          <div className="flex items-center gap-2">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 20 20"
                              fill="none"
                            >
                              <path
                                d="M11.2188 18.0621L11.0071 17.6092L11.2188 18.0621ZM8.78056 18.0621L8.99228 17.6092L8.78056 18.0621ZM11.2188 18.0621L11.0071 17.6092C10.3673 17.9082 9.632 17.9082 8.99228 17.6092L8.78056 18.0621L8.56885 18.5151C9.47692 18.9395 10.5224 18.9395 11.4305 18.5151L11.2188 18.0621ZM3.33301 8.45283H2.83301C2.83301 10.4014 3.38875 12.4973 4.37248 14.3086C5.35524 16.1182 6.78679 17.6821 8.56885 18.5151L8.78056 18.0621L8.99228 17.6092C7.45455 16.8904 6.16232 15.5089 5.25125 13.8314C4.34115 12.1556 3.83301 10.2227 3.83301 8.45283H3.33301ZM16.6663 8.45283H16.1663C16.1663 10.2227 15.6582 12.1556 14.7481 13.8314C13.837 15.5089 12.5448 16.8904 11.0071 17.6092L11.2188 18.0621L11.4305 18.5151C13.2126 17.6821 14.6441 16.1182 15.6269 14.3086C16.6106 12.4973 17.1663 10.4014 17.1663 8.45283H16.6663ZM9.99967 1.66675V2.16675C13.3971 2.16675 16.1663 4.97272 16.1663 8.45283H16.6663H17.1663C17.1663 4.43724 13.966 1.16675 9.99967 1.16675V1.66675ZM9.99967 1.66675V1.16675C6.0333 1.16675 2.83301 4.43724 2.83301 8.45283H3.33301H3.83301C3.83301 4.97272 6.60225 2.16675 9.99967 2.16675V1.66675ZM12.4997 8.33342H11.9997C11.9997 9.43798 11.1042 10.3334 9.99967 10.3334V10.8334V11.3334C11.6565 11.3334 12.9997 9.99027 12.9997 8.33342H12.4997ZM9.99967 10.8334V10.3334C8.8951 10.3334 7.99967 9.43798 7.99967 8.33342H7.49967H6.99967C6.99967 9.99027 8.34282 11.3334 9.99967 11.3334V10.8334ZM7.49967 8.33342H7.99967C7.99967 7.22885 8.8951 6.33342 9.99967 6.33342V5.83342V5.33342C8.34282 5.33342 6.99967 6.67656 6.99967 8.33342H7.49967ZM9.99967 5.83342V6.33342C11.1042 6.33342 11.9997 7.22885 11.9997 8.33342H12.4997H12.9997C12.9997 6.67656 11.6565 5.33342 9.99967 5.33342V5.83342Z"
                                fill="#626060"
                              />
                            </svg>
                            {patient.address &&
                              (patient.address.blockNo ||
                                patient.address.areaStreet ||
                                patient.address.city ||
                                patient.address.state)
                              ? `${patient.address.areaStreet || ""}${patient.address.areaStreet &&
                                patient.address.city
                                ? ", "
                                : ""
                              }${patient.address.city || ""}${patient.address.state
                                ? " - " + patient.address.state
                                : ""
                              }`
                              : "-"}
                          </div>
                          {patient.address && patient.address.city ? (
                            <img
                              src="/check_circle.svg"
                              width="14"
                              height="14"
                              alt="Primary contact verified"
                            />
                          ) : (
                            "-"
                          )}
                        </div>
                        <div className="flex items-center justify-between text-gray-600">
                          <div className="flex items-center gap-2">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="20"
                              height="20"
                              viewBox="0 0 20 20"
                              fill="none"
                            >
                              <path
                                d="M18.3337 10.0001C18.3337 11.0944 18.1181 12.1781 17.6993 13.1891C17.2805 14.2002 16.6667 15.1188 15.8929 15.8926C15.1191 16.6665 14.2004 17.2803 13.1894 17.6991C12.1783 18.1179 11.0947 18.3334 10.0003 18.3334M18.3337 10.0001C18.3337 8.90573 18.1181 7.8221 17.6993 6.81105C17.2805 5.80001 16.6667 4.88135 15.8929 4.10753C15.1191 3.3337 14.2004 2.71988 13.1894 2.30109C12.1783 1.8823 11.0947 1.66675 10.0003 1.66675M18.3337 10.0001L1.66699 10.0001M10.0003 18.3334C8.90598 18.3334 7.82234 18.1179 6.8113 17.6991C5.80025 17.2803 4.88159 16.6665 4.10777 15.8926C3.33395 15.1188 2.72012 14.2002 2.30133 13.1891C1.88254 12.1781 1.66699 11.0944 1.66699 10.0001M10.0003 18.3334C10.4381 18.3334 10.8715 18.1179 11.2759 17.6991C11.6804 17.2803 12.0478 16.6665 12.3573 15.8926C12.6669 15.1188 12.9124 14.2002 13.0799 13.1891C13.2474 12.1781 13.3337 11.0944 13.3337 10.0001C13.3337 8.90573 13.2474 7.8221 13.0799 6.81105C12.9124 5.80001 12.6669 4.88135 12.3573 4.10753C12.0478 3.3337 11.6804 2.71988 11.2759 2.30109C10.8715 1.8823 10.4381 1.66675 10.0003 1.66675M10.0003 18.3334C9.56259 18.3334 9.12913 18.1179 8.72471 17.6991C8.3203 17.2803 7.95283 16.6665 7.6433 15.8926C7.33377 15.1188 7.08824 14.2002 6.92073 13.1891C6.75321 12.1781 6.66699 11.0944 6.66699 10.0001C6.66699 8.90573 6.75321 7.8221 6.92073 6.81105C7.08824 5.80001 7.33377 4.88135 7.6433 4.10752C7.95283 3.3337 8.3203 2.71987 8.72471 2.30108C9.12913 1.8823 9.56259 1.66675 10.0003 1.66675M1.66699 10.0001C1.66699 8.90573 1.88254 7.8221 2.30133 6.81105C2.72012 5.80001 3.33395 4.88135 4.10777 4.10752C4.88159 3.3337 5.80025 2.71987 6.8113 2.30108C7.82234 1.8823 8.90598 1.66675 10.0003 1.66675"
                                stroke="#626060"
                                strokeLinecap="round"
                              />
                            </svg>
                            {(patient.demographics &&
                              (patient.demographics.contactDetails
                                ?.primaryLanguage ||
                                (
                                  patient.demographics.contactDetails
                                    ?.secondaryLanguages || []
                                ).join("/"))) ||
                              "-"}
                          </div>
                          {patient.demographics &&
                            patient.demographics.contactDetails ? (
                            <CheckCircle className="h-4 w-4 text-green-500" />
                          ) : null}
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="text-sm font-semibold text-gray-800">
                    Last Visit
                  </div>

                  {/* horizontal line */}
                  <div className="border-b border-gray-300 mt-1 mb-2"></div>

                  <div className="flex flex-col gap-y-3 text-sm text-gray-700">
                    <div className="flex items-center justify-between">
                      <div className="text-gray-500">Date:</div>
                      <div className="col-span-2">
                        {patient.lastVisit || "-"}
                      </div>
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="text-gray-500">Doctor:</div>
                      <div className="col-span-2">
                        {patient.lastVisitDoctor || "-"}
                      </div>
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="text-gray-500">Type:</div>
                      <div className="col-span-2">
                        {(patient.raw &&
                          patient.raw.overview &&
                          patient.raw.overview.lastVisit &&
                          patient.raw.overview.lastVisit.type) ||
                          "-"}
                      </div>
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="text-gray-500">Reason:</div>
                      <div className="col-span-2">
                        {patient.lastVisitReason || "-"}
                      </div>
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="text-gray-500">Status:</div>
                      <div className="col-span-2 text-[#3EAF3F] bg-[#F2FFF3] px-2 rounded-sm">
                        {(patient.raw &&
                          patient.raw.overview &&
                          patient.raw.overview.lastVisit &&
                          patient.raw.overview.lastVisit.status) ||
                          "-"}
                      </div>
                    </div>
                    <div className="col-span-3 text-xs text-blue-600">
                      <button className="">View Prescription â†’</button>
                    </div>
                  </div>

                  <div className="text-sm font-semibold text-gray-800 mt-3">
                    Last Recorded Vitals & Biometrics
                  </div>

                  {/* horizontal line */}
                  <div className="border-b border-gray-300 mt-1 mb-2"></div>

                  {patient.lastRecordedVitals ? (
                    <div>
                      <div className="text-xs text-gray-500 mb-1">
                        {(patient.lastRecordedVitals.recordedOn &&
                          new Date(
                            patient.lastRecordedVitals.recordedOn
                          ).toLocaleDateString("en-GB")) ||
                          "Recorded on â€”"}
                        {patient.lastRecordedVitals.recordedBy
                          ? ` by ${patient.lastRecordedVitals.recordedBy.name ||
                          patient.lastRecordedVitals.recordedBy
                          }`
                          : ""}
                      </div>
                      <div className="text-sm text-gray-700 space-y-1">
                        {(() => {
                          const vObj = patient.lastRecordedVitals.vitals || {};
                          const bObj = patient.lastRecordedVitals.biometrics || {};

                          const items = [
                            { label: "Blood Pressure", value: vObj.bloodPressure ? `${vObj.bloodPressure.systolic}/${vObj.bloodPressure.diastolic} mmHg` : null },
                            { label: "Oxygen Saturation", value: vObj.oxygenSaturation ? `${vObj.oxygenSaturation}%` : null },
                            { label: "Temperature", value: vObj.temperature ? `${vObj.temperature} Â°F` : null },
                            { label: "Heart Rate", value: vObj.heartRate ? `${vObj.heartRate} bpm` : null },
                            { label: "Respiratory Rate", value: vObj.respiratoryRate ? `${vObj.respiratoryRate} bpm` : null },
                            { label: "Weight", value: bObj.weight ? `${bObj.weight} Kg` : null },
                            { label: "Height", value: bObj.height ? `${bObj.height} cm` : null },
                            { label: "BMI", value: bObj.bmi || null },
                          ].filter(i => i.value !== null);

                          return items.length > 0 ? items.map((item, idx) => (
                            <div key={idx} className="flex justify-between py-0.5">
                              <span className="text-gray-600">{item.label}:</span>
                              <span className="font-medium text-gray-800">{item.value}</span>
                            </div>
                          )) : <div className="text-xs text-gray-400 italic">No specific vitals recorded in this session.</div>;
                        })()}
                      </div>
                    </div>
                  ) : (
                    <div className="text-sm text-gray-400 p-4 text-center border rounded-md italic">
                      No vitals recorded recently.
                    </div>
                  )}

                  <div className="text-sm font-semibold text-gray-800 mt-3">
                    Active Problems
                  </div>

                  {/* horizontal line */}
                  <div className="border-b border-gray-300 mt-1 mb-2"></div>


                  <div className="flex flex-col gap-2 mb-2 text-sm text-gray-600">
                    {activeProblems.length > 0 ? activeProblems.map((p, idx) => (
                      <div
                        key={idx}
                        className="flex items-center justify-between"
                      >
                        <div className="text-gray-600">{p.title}</div>
                        <div>
                          <Badge
                            type="ghost"
                            color={
                              p.label && p.label.toLowerCase().includes("high")
                                ? "red"
                                : "gray"
                            }
                          >
                            {p.label}
                          </Badge>
                        </div>
                      </div>
                    )) : (
                      <div className="text-xs text-gray-400 italic">No active problems reported.</div>
                    )}
                  </div>

                  <div className="flex items-center justify-between mt-5">
                    <div className="text-sm font-semibold text-gray-800">
                      Dependents{" "}
                      <span className="text-xs text-gray-500">
                        {dependants.length ? `(${dependants.length})` : ""}
                      </span>
                    </div>
                    <div className="text-sm text-blue-600">+ Add New</div>
                  </div>

                  {/* horizontal line */}
                  <div className="border-b border-gray-300 mt-1 mb-2"></div>

                  <div className="flex flex-col gap-3 text-sm text-gray-700">
                    {dependants && dependants.length > 0 ? (
                      dependants.map((d) => (
                        <div
                          key={d.id || d.name}
                          className="flex items-center gap-2"
                        >
                          <AvatarCircle name={d.name} size="s" />
                          <div>
                            <div className="font-medium">
                              {d.name}{" "}
                              <span className="text-xs text-gray-500">
                                {d.relation
                                  ? d.relation.charAt(0) +
                                  d.relation.slice(1).toLowerCase()
                                  : "Dependant"}
                              </span>
                            </div>
                            <div className="text-xs text-gray-500">
                              {d.phone || "â€”"}
                            </div>
                          </div>
                          <button className="ml-auto p-1.5 rounded hover:bg-gray-100">
                            <MoreHorizontal className="h-4 w-4" />
                          </button>
                        </div>
                      ))
                    ) : (
                      <div className="text-xs text-gray-500">
                        No dependents found.{" "}
                        <button className="text-blue-600 underline">
                          + Add New
                        </button>
                      </div>
                    )}
                  </div>
                </div>
              )}

              {leftTab === "demographics" && <PatientDemographics overview={patient.raw?.overview} patientId={patient.patientId} />}
            </div>

            {/* Right flexible column with its own nav */}
            <div className="flex-1">
              <div className="h-10 gap-2 px-2 opacity-100 border-b-[0.5px] border-[#D6D6D6]">
                <button
                  onClick={() => setRightTab("vitals")}
                  className={`h-10 px-2 ${rightTab === "vitals"
                    ? "text-blue-600 border-b-2 border-blue-600"
                    : "text-gray-600 hover:text-gray-800"
                    }`}
                >
                  Vitals & Biometrics
                </button>
                <button
                  onClick={() => setRightTab("appointment")}
                  className={`h-10 px-2 ${rightTab === "appointment"
                    ? "text-blue-600 border-b-2 border-blue-600"
                    : "text-gray-600 hover:text-gray-800"
                    }`}
                >
                  Appointment
                </button>
                <button
                  onClick={() => setRightTab("medical")}
                  className={`h-10 px-2 ${rightTab === "medical"
                    ? "text-blue-600 border-b-2 border-blue-600"
                    : "text-gray-600 hover:text-gray-800"
                    }`}
                >
                  Medical History
                </button>
                {/* <button
                  onClick={() => setRightTab("documents")}
                  className={`h-9 px-2 ${
                    rightTab === "documents"
                      ? "text-blue-600 border-b-2 border-blue-600"
                      : "text-gray-600 hover:text-gray-800"
                  }`}
                >
                  Documents
                </button> */}
              </div>

              <div className="p-[16px] flex flex-col gap-[24px]">
                {rightTab === "vitals" && (
                  <div>
                    <PatientVitals
                      embedded
                      onAdd={handleOpenAddVitals}
                      vitalsHistory={vitalsHistory}
                      biometricsHistory={biometricsHistory}
                    />
                  </div>
                )}
                {rightTab === "appointment" && (
                  <div>
                    <PatientAppointments
                      patientId={patient.patientId}
                      appointmentData={appointments}
                    />
                  </div>
                )}
                {rightTab === "medical" && (
                  <div>
                    <PatientMedicalHistory
                      patientId={patient.patientId}
                      historyData={medicalHistory}
                      onRefresh={refreshVitals}
                    />
                  </div>
                )}
                {rightTab === "documents" && (
                  <div className="py-2">
                    <PatientDocuments />
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
      <AddVitalsDrawer
        open={vitalsDrawerOpen}
        onClose={handleCloseAddVitals}
        onSave={handleSaveVitals}
        patient={patient}
      />
      <ScheduleAppointmentDrawer2
        open={isScheduleOpen}
        onClose={() => setIsScheduleOpen(false)}
        patient={patient}
        doctorId={authDoc?.doctorId || authDoc?.id}
        clinicId={clinicData?.id || clinicData?.clinicId}
        onSchedule={() => {
          window.location.reload();
        }}
        zIndex={6000}
      />
    </>
  );
}
